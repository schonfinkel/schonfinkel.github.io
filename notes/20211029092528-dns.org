:PROPERTIES:
:ID:       f5f06bf3-d288-47a8-901f-37bec1ba50e7
:ROAM_ALIASES: "Domain Name System"
:END:
#+title: DNS
#+filetags: :dns:

#+begin_quote
The Domain Name System is a distributed database. This structure allows local
control of the segments of the overall database, yet data in each segment is
available across the entire network through a client/server scheme. Robustness
and adequate performance are achieved through replication and caching.

Programs called nameservers constitute the server half of DNS's client/server
mechanism. Nameservers contain information about some segments of the database
and make that information available to clients, called resolvers. Resolvers are
often just library routines that create queries and send them across a network
to a nameserver. [cite:@liu2006dns p.4]
#+end_quote

#+NAME: dns-structure
#+BEGIN_SRC dot :file ../static/img/notes/dns_structure.png :cmdline -Kdot -Tpng :exports results
  graph "DNS" {
    fontname="Helvetica,Arial,sans-serif"
    node [shape=circle, fontsize=11, margin=0, fontname="Helvetica,Arial,sans-serif"]
    edge [fontname="Helvetica,Arial,sans-serif"]
    label="DNS Database"

    subgraph cluster_network {
      label="The Hierarchical Structure"

      root [label=""];

      // Top-Level Domains
      com [label="com"];
      edu [label="edu"];
      gov [label="gov"];
      org [label="org"];

      // Com
      github [fontsize=8, label="github"];
      google [fontsize=8, label="google"];
      youtube [fontsize=8, label="youtube"];

      // Gov
      br [label="br"];
      uk [label="uk"];

      // Org
      wikipedia [fontsize=7, label="wikipedia"];
      coursera [fontsize=7, label="coursera"];
      en_wikipedia [label="en"];
      pt_wikipedia [label="pt"];

      // -----
      // Links
      // -----
      root -- com;
      root -- gov;
      root -- edu;
      root -- org;

      // Com
      com -- github [label="."];
      com -- google [label="."];
      com -- youtube [label="."];

      // Gov
      gov -- br [label="."];
      gov -- uk [label="."];

      // Org
      org -- coursera [label="."];
      org -- wikipedia [label="."];
      wikipedia -- en_wikipedia [label="."];
      wikipedia -- pt_wikipedia [label="."];
    }
  }
#+END_SRC

#+RESULTS: dns-structure
[[file:../static/img/notes/dns_structure.png]]

#+begin_src shell
  > dig +noall +answer wikipedia.org
  wikipedia.org.		276	IN	A	195.200.68.224
  # or 
  > dig +noall +answer wikipedia.org AAAA
  wikipedia.org.		185	IN	AAAA	2a02:ec80:700:ed1a::1
#+end_src

| Human-Friendly Name | Machine-Friendly Name |
|---------------------+-----------------------|
| www.wikipedia.com   |        195.200.68.224 |
| dns.cloudfare.com   |               1.1.1.1 |

* Terminology

** Domains and Subdomains

#+begin_quote
Each node is also the root of a new subtree of the overall tree. Each of these
subtrees represents a partition of the overall database—a directory in the Unix
filesystem, or a *domain* in the *Domain Name System*. Each *domain* or *directory* can
be further divided into additional partitions, called *subdomains* in DNS, like a
filesystem’s subdirectories. Subdomains, like subdirectories, are drawn as
children of their parent domains.

(...)

In DNS, each domain can be broken into a number of subdomains, and
responsibility for those subdomains can be doled out to different
organizations. For example, an organization called EDUCAUSE manages the ~edu~
(educational) domain but delegates responsibility for the ~berkeley.edu~ subdomain
to U.C. Berkeley.
[cite:@liu2006dns p.5]
#+end_quote

** Labels

| Node |   | Subdomain |   | Domain |   | TLD | Root |
|------+---+-----------+---+--------+---+-----+------|
| www  | . | abc       | . | xyz    | . | com | .    |

where TLD is an abbreviation for "Top Level Domain".

** Zones

** Query Types

+ Recursive
+ Iterative

* Records

| Record Name | Synonims | Description                                       |
|-------------+----------+---------------------------------------------------|
| ~A~           |          | Maps a domain name to an IPV4 address             |
| ~AAAA~        | Quad A   | Maps a domain name to an IPV6 address             |
| ~NS~          |          | Maps a domain name to an authoritative DNS server |

